#include "catch.hpp"
#include "../Cola.h"

SCENARIO("creación de colas", "[cola]") {
    GIVEN("ninguna precondición") {
        WHEN("se crea una cola") {
            Cola<char> c;
            
            THEN("esta vacía") {
                REQUIRE(c.estaVacia());
            }
        }
    }
}

SCENARIO("manipulación de elementos de la cola", "[cola]") {
    GIVEN("una cola vacía") {
        Cola<char> c;
        WHEN("se encola") {
            c.encolar('a');
            
            THEN("la cola ya no está vacía") {
                REQUIRE(!c.estaVacia());
            }
            THEN("el largo es uno") {
                REQUIRE(c.largo() == 1);
            }
        }
    }
    GIVEN("una cola con un elemento") {
        Cola<char> c;
        c.encolar('a');

        WHEN("se desencola") {
            char resultado = c.desencolar();
            
            THEN("se devuelve el elemento") {
                REQUIRE(resultado == 'a');
            }
            THEN("se reduce el largo de la cola en uno") {
                REQUIRE(c.largo() == 0);
            }
        }
        WHEN("se encola") {
            c.encolar('b');
            
            THEN("se incrementa el largo") {
                REQUIRE(c.largo() == 2);
            }
        }
    }
    GIVEN("una cola con elementos") {
        Cola<char> c;
        c.encolar('a');
        c.encolar('b');
        c.encolar('c');

        WHEN("se desencolan todos los elementos") {
            char r1 = c.desencolar();
            char r2 = c.desencolar();
            char r3 = c.desencolar();
            
            THEN("se devuelven según el orden FIFO") {
                REQUIRE(r1 == 'a');
                REQUIRE(r2 == 'b');
                REQUIRE(r3 == 'c');
            }
            THEN("la cola esta vacía") {
                REQUIRE(c.largo() == 0);
                REQUIRE(c.estaVacia());
            }
        }
    }
}
